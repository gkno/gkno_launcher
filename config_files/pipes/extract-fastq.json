{
  "description" : "Extract paired end fastqs from a bam file, compress and check.",
  "categories" : ["BAM-processing"],

  "tasks" : {
    "extract" : {
      "tool" : "bam-to-fastq"
    },
    "compress-1" : {
      "tool" : "gzip-delete"
    },
    "compress-2" : {
      "tool" : "gzip-delete"
    }
  },

  "nodes" : [
    {
      "ID" : "bam",
      "description" : "The input BAM file.",
      "long form argument" : "--in",
      "short form argument" : "-i",
      "tasks" : {
        "extract" : "--in"
      }
    },
    {
      "ID" : "reference",
      "description" : "Reference file for converting '=' in the sequence to the actual base if '=' are found and the refFile is not specified, 'N' is written to the FASTQ.",
      "long form argument" : "--fasta-reference",
      "short form argument" : "-f",
      "tasks" : {
        "extract" : "--fasta-reference"
      }
    },
    {
      "ID" : "compress",
      "description" : "Compress the first mate.",
      "tasks" : {
        "extract" : "--out",
        "compress-1" : "--in",
        "compress-2" : "--in"
      },
      "extensions" : {
        "compress-1" : {
          "--in" : "_1.fastq"
        },
        "compress-2" : {
          "--in" : "_2.fastq"
        }
      },
      "delete files" : true
    }
  ],

  "parameter sets" : [
    {
      "ID" : "default",
      "description" : "The default parameter set sets all the parameters for the pipeline to run.",
      "nodes" : [
      ]
    },

    {
      "ID" : "test",
      "description" : "Parameter set for use with the test-harness.",
      "nodes" : [
        {
          "ID" : "bam",
          "argument" : "--in",
          "values" : ["$(RESOURCES)/tutorial/current/mutated_genome.bam"]
        },
        {
          "ID" : "ref",
          "argument" : "--fasta-reference",
          "values" : ["$(RESOURCES)/tutorial/current/chr20_fragment.fa"]
        }
      ]
    }
  ]
}
