{
  "id" : "tangram",
  "configuration type" : "pipeline",
  "description" : "INCLUDE DESCRIPTION",
  "categories" : ["SV-discovery", "Variant-discovery"],

  "pipeline tasks" : [
    {
      "task" : "build-tangram-reference",
      "tool" : "tangram-index"
    },
    {
      "task" : "scan-bam-files",
      "tool" : "tangram-scan"
    },
    {
      "task" : "detect-mei",
      "tool" : "tangram-detect"
    }
  ],

  "arguments" : {
    "Inputs" : [
      {
        "description" : "The reference FASTA file.",
        "long form argument" : "--fasta-reference",
        "short form argument" : "-r",
        "node id" : "reference"
      },
      {
        "description" : "The mobile element reference FASTA file.",
        "long form argument" : "--mobile-element-fasta",
        "short form argument" : "-m",
        "node id" : "moblist"
      },
      {
        "description" : "An input file containing a list of BAM files.",
        "long form argument" : "--in",
        "short form argument" : "-i",
        "required" : true,
        "node id" : "input"
      }
    ],

    "Outputs" : [
      {
        "description" : "The reference file created by Tangram index.",
        "long form argument" : "--tangram-reference",
        "short form argument" : "-a",
        "node id" : "t-reference"
      },
      {
        "description" : "Library information file (generated by tangram-scan).",
        "long form argument" : "--library-file",
        "short form argument" : "-l",
        "node id" : "library"
      },
      {
        "description" : "Fragment length distribution information file (generated by tangram-scan).",
        "long form argument" : "--histogram-file",
        "short form argument" : "-ht",
        "node id" : "histogram"
      },
      {
        "description" : "The output VCF file containing the MEI calls.",
        "long form argument" : "--out",
        "short form argument" : "-o",
        "node id" : "output"
      }
    ],

    "Options" : [
      {
        "description" : "The number of threads to use.",
        "long form argument" : "--threads",
        "short form argument" : "-t",
        "node id" : "threads"
      },
      {
        "description" : "The output path for Tangram files.",
        "long form argument" : "--path",
        "short form argument" : "-p",
        "required" : true,
        "node id" : "path"
      },
      {
        "description" : "The minimum number of normal fragments in a library.",
        "long form argument" : "--minimum-fragments",
        "short form argument" : "-mf",
        "node id" : "fragments"
      },
      {
        "description" : "The region of interest in the genome.",
        "long form argument" : "--region",
        "short form argument" : "-rg",
        "node id" : "region"
      }
    ]
  },

  "unique graph nodes" : [
    {
      "id" : "reference",
      "task" : "build-tangram-reference",
      "task argument" : "--fasta-reference"
    },
    {
      "id" : "moblist",
      "task" : "build-tangram-reference",
      "task argument" : "--special-reference"
    },
    {
      "id" : "threads",
      "task" : "detect-mei",
      "task argument" : "--threads"
    },
    {
      "id" : "path",
      "task" : "scan-bam-files",
      "task argument" : "--path"
    },
    {
      "id" : "fragments",
      "task" : "scan-bam-files",
      "task argument" : "--minimum-fragments"
    },
    {
      "id" : "region",
      "task" : "detect-mei",
      "task argument" : "--region"
    },
    {
      "id" : "output",
      "task" : "detect-mei",
      "task argument" : "--out"
    }
  ],

  "shared graph nodes" : [
    {
      "id" : "t-reference",
      "arguments sharing node" : [
        {
          "task" : "build-tangram-reference",
          "task argument" : "--tangram-reference"
        },
        {
          "task" : "detect-mei",
          "task argument" : "--tangram-reference"
        }
      ]
    },
    {
      "id" : "input",
      "arguments sharing node" : [
        {
          "task" : "scan-bam-files",
          "task argument" : "--in"
        },
        {
          "task" : "detect-mei",
          "task argument" : "--in"
        }
      ]
    },
    {
      "id" : "library",
      "arguments sharing node" : [
        {
          "task" : "scan-bam-files",
          "task argument" : "--library-file"
        },
        {
          "task" : "detect-mei",
          "task argument" : "--library-file"
        }
      ]
    },
    {
      "id" : "histogram",
      "arguments sharing node" : [
        {
          "task" : "scan-bam-files",
          "task argument" : "--histogram-file"
        },
        {
          "task" : "detect-mei",
          "task argument" : "--histogram-file"
        }
      ]
    }
  ],

  "parameter sets" : [
    {
      "id" : "default",
      "description" : "Default parameter set requires user to input all input filenames.",
      "data" : [
        {
          "id" : "tangram reference",
          "node" : "t-reference",
          "values" : ["$(PWD)/tangram_reference.dat"]
        },
        {
          "id" : "tangram directory",
          "node" : "path",
          "values" : ["$(PWD)/tangram_files"]
        }
      ]
    },

    {
      "id" : "test",
      "description" : "Test parameter set for the test harness.",
      "data" : [
        {
          "id" : "fasta reference",
          "node" : "reference",
          "values" : ["$(RESOURCES)/tutorial/current/chr20_fragment.fa"]
        },
        {
          "id" : "moblist",
          "node" : "moblist",
          "values" : ["$(RESOURCES)/tutorial/current/mobile_element_sequences.fa"]
        },
        {
          "id" : "bam list",
          "node" : "input",
          "values" : ["$(RESOURCES)/tutorial/current/bam_list.txt"]
        },
        {
          "id" : "vcf",
          "node" : "output",
          "values" : ["tangram_mei_calls.vcf"]
        },
        {
          "id" : "region",
          "node" : "region",
          "values" : [20]
        },
        {
          "id" : "fragments",
          "node" : "fragments",
          "values" : [0]
        }
      ]
    }
  ]
}
