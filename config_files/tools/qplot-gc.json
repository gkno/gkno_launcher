{
  "id" : "qplot",
  "description" : "Calculate and display bam summary statistics.",
  "category" : "alignment processing",
  "tools" : ["qplot"],
  "path" : "qplot/bin",
  "executable" : "qplot",
  "help" : "--help|-h",
  "arguments" : {
    "inputs" : [
      {
        "description" : "The input BAM file.",
        "long form argument" : "--in",
        "short form argument" : "-i",
        "command line argument" : "-in",
        "required" : true,
        "data type" : "string",
        "modify argument name on command line" : "hide",
        "extensions" : [".bam"]
      },
      {
        "description" : "The reference genome.",
        "long form argument" : "--fasta-reference",
        "short form argument" : "-r",
        "command line argument" : "--reference",
        "required" : true,
        "data type" : "string",
        "extensions" : [".fa", ".fasta"]
      },
      {
        "description" : "The dbSNP vcf file.",
        "long form argument" : "--dbsnp",
        "short form argument" : "-d",
        "command line argument" : "--dbsnp",
        "required" : true,
        "data type" : "string",
        "extensions" : [".vcf"]
      }
    ],
  
    "outputs" : [
      {
        "description" : "Output a plot of summary statistics.",
        "long form argument" : "--plot",
        "short form argument" : "-p",
        "command line argument" : "--plot",
        "data type" : "string",
        "extensions" : [".pdf"]
      },
      {
        "description" : "Output summary statistics.",
        "long form argument" : "--stats",
        "short form argument" : "-s",
        "command line argument" : "--stats",
        "required" : true,
        "data type" : "string",
        "extensions" : [".stats"],
        "construct filename" : {
          "method": "from tool argument",
          "use argument" : "--in",
          "modify extension" : "replace"
        }
      },
      {
        "description" : "GC content file.",
        "long form argument" : "--gc-content-file",
        "short form argument" : "-g",
        "command line argument" : "--gc-content-file",
        "required" : true,
        "modify argument name on command line" : "omit",
        "data type" : "string",
        "extensions" : [".gc"],
        "construct filename" : {
          "method": "from tool argument",
          "use argument" : "--fasta-reference",
          "modify extension" : "replace",
          "modify text" : [
            {
              "add additional text" : [".winsize"],
            },
            {
              "add argument values" : ["--window-size"]
            }
          ]
        }
      }
    ],
  
    "Flag filters" : [
      {
        "description" : "Ignore the first mate.",
        "long form argument" : "--skip-read1",
        "short form argument" : "-s1",
        "command line argument" : "--read1_skip",
        "data type" : "flag",
        "extensions" : ["no extension"]
      },
      {
        "description" : "Ignore the second mate.",
        "long form argument" : "--skip-read2",
        "short form argument" : "-s2",
        "command line argument" : "--read2_skip",
        "data type" : "flag",
        "extensions" : ["no extension"]
      },
      {
        "description" : "Ignore paired reads.",
        "long form argument" : "--skip-paired",
        "short form argument" : "-sp",
        "command line argument" : "--paired_skip",
        "data type" : "flag",
        "extensions" : ["no extension"]
      },
      {
        "description" : "Ignore unpaired reads.",
        "long form argument" : "--skip-unpaired",
        "short form argument" : "-su",
        "command line argument" : "--unpaired_skip",
        "data type" : "flag",
        "extensions" : ["no extension"]
      }
    ],

    "Additional filters" : [
      {
        "description" : "Keep secondary reads.",
        "long form argument" : "--keep-secondary",
        "short form argument" : "-ks",
        "command line argument" : "--secondary_keep",
        "data type" : "flag",
        "extensions" : ["no extension"]
      },
      {
        "description" : "Keep duplicate reads.",
        "long form argument" : "--keep-duplicate",
        "short form argument" : "-kd",
        "command line argument" : "--dup_keep",
        "data type" : "flag",
        "extensions" : ["no extension"]
      },
      {
        "description" : "Keep qc failed reads.",
        "long form argument" : "--keep-qc-failed",
        "short form argument" : "-kq",
        "command line argument" : "--qcfail_keep",
        "data type" : "flag",
        "extensions" : ["no extension"]
      },
      {
        "description" : "Ignore reads with mapping quality below MQ.",
        "long form argument" : "--minimum-mapping-quality",
        "short form argument" : "-mq",
        "command line argument" : "--minMapQuality",
        "data type" : "integer",
        "extensions" : ["no extension"]
      }
    ],

    "Input options" : [
      {
        "description" : "Lanes to process.",
        "long form argument" : "--lanes",
        "short form argument" : "-l",
        "command line argument" : "--lanes",
        "data type" : "string",
        "extensions" : ["no extension"]
      },
      {
        "description" : "Read groups to process.",
        "long form argument" : "--read-groups",
        "short form argument" : "-rp",
        "command line argument" : "--readGroup",
        "data type" : "string",
        "extensions" : ["no extension"]
      }
    ],

    "GC content options" : [
      {
        "description" : "Window size for gc content file..",
        "long form argument" : "--window-size",
        "short form argument" : "-w",
        "command line argument" : "--winsize",
        "data type" : "integer",
        "extensions" : ["no extension"]
      }
    ]
  },

  "argument order" : [
    "--fasta-reference",
    "--dbsnp",
    "--plot",
    "--stats",
    "--skip-read1",
    "--skip-read2",
    "--skip-paired",
    "--skip-unpaired",
    "--keep-secondary",
    "--keep-duplicate",
    "--keep-qc-failed",
    "--minimum-mapping-quality",
    "--lanes",
    "--read-groups",
    "--window-size",
    "--gc-content-file",
    "--in"
  ],

  "instances" : [
    {
      "ID" : "default",
      "description" : "Default instance requires the users input for all files.",
      "nodes" : [
        {
          "ID" : "window",
          "argument" : "--window-size",
          "values" : [100]
        }
      ]
    },

    {
      "ID" : "test",
      "description" : "Instance for use with the test-harness.",
      "nodes" : [
        {
          "ID" : "Input BAM file",
          "values" : ["$(RESOURCES)/tutorial/current/mutated_genome.bam"],
          "argument" : "--in"
        },
        {
          "ID" : "reference",
          "values" : ["$(RESOURCES)/tutorial/current/chr20_fragment.fa"],
          "argument" : "--fasta-reference"
        },
        {
          "ID" : "dbsnp",
          "values" : ["$(RESOURCES)/tutorial/current/chr20_fragment.dbSNP.snps.sites.vcf"],
          "argument" : "--dbsnp"
        }
      ]
    }
  ]
}
